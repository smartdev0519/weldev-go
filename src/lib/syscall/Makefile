# Copyright 2009 The Go Authors. All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

# DO NOT EDIT.  Automatically generated by gobuild.
# gobuild -m errstr_${GOOS}.go file_${GOOS}.go socket_${GOOS}.go\
#    syscall_${GOARCH}_${GOOS}.go time_${GOARCH}_${GOOS}.go types_${GOARCH}_${GOOS}.go\
#    asm_${GOARCH}_${GOOS}.s syscall.go signal_${GOARCH}_${GOOS}.go\
#    exec.go >Makefile
O=6
GC=$(O)g
CC=$(O)c -w
AS=$(O)a
AR=$(O)ar

default: packages

clean:
	rm -f *.$O *.a $O.out

test: packages
	gotest

coverage: packages
	gotest
	6cov -g `pwd` | grep -v '_test\.go:'

%.$O: %.go
	$(GC) $*.go

%.$O: %.c
	$(CC) $*.c

%.$O: %.s
	$(AS) $*.s

O1=\
	errstr_$(GOOS).$O\
	syscall_$(GOARCH)_$(GOOS).$O\
	asm_$(GOARCH)_$(GOOS).$O\
	syscall.$O\
	signal_$(GOARCH)_$(GOOS).$O\

O2=\
	types_$(GOARCH)_$(GOOS).$O\

O3=\
	file_$(GOOS).$O\
	socket_$(GOOS).$O\
	time_$(GOARCH)_$(GOOS).$O\

O4=\
	exec.$O\

syscall.a: a1 a2 a3 a4

a1:	$(O1)
	$(AR) grc syscall.a errstr_$(GOOS).$O syscall_$(GOARCH)_$(GOOS).$O asm_$(GOARCH)_$(GOOS).$O syscall.$O signal_$(GOARCH)_$(GOOS).$O
	rm -f $(O1)

a2:	$(O2)
	$(AR) grc syscall.a types_$(GOARCH)_$(GOOS).$O
	rm -f $(O2)

a3:	$(O3)
	$(AR) grc syscall.a file_$(GOOS).$O socket_$(GOOS).$O time_$(GOARCH)_$(GOOS).$O
	rm -f $(O3)

a4:	$(O4)
	$(AR) grc syscall.a exec.$O
	rm -f $(O4)

newpkg: clean
	$(AR) grc syscall.a

$(O1): newpkg
$(O2): a1
$(O3): a2
$(O4): a3

nuke: clean
	rm -f $(GOROOT)/pkg/syscall.a

packages: syscall.a

install: packages
	cp syscall.a $(GOROOT)/pkg/syscall.a

