# Copyright 2009 The Go Authors.  All rights reserved.
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

# DO NOT EDIT.  Automatically generated by gobuild.
# gobuild -m >Makefile

D=/go

O_arm=5
O_amd64=6
O_386=8
OS=568vq

O=$(O_$(GOARCH))
GC=$(O)g -I_obj
CC=$(O)c -FVw
AS=$(O)a
AR=6ar

default: packages

clean:
	rm -rf *.[$(OS)] *.a [$(OS)].out _obj

test: packages
	gotest

coverage: packages
	gotest
	6cov -g `pwd` | grep -v '_test\.go:'

%.$O: %.go
	$(GC) $*.go

%.$O: %.c
	$(CC) $*.c

%.$O: %.s
	$(AS) $*.s

O1=\
	token.$O\

O2=\
	scanner.$O\
	ast.$O\

O3=\
	doc.$O\
	parser.$O\


phases: a1 a2 a3
_obj$D/ast.a: phases
_obj$D/doc.a: phases
_obj$D/parser.a: phases
_obj$D/scanner.a: phases
_obj$D/token.a: phases

a1: $(O1)
	$(AR) grc _obj$D/token.a token.$O
	rm -f $(O1)

a2: $(O2)
	$(AR) grc _obj$D/scanner.a scanner.$O
	$(AR) grc _obj$D/ast.a ast.$O
	rm -f $(O2)

a3: $(O3)
	$(AR) grc _obj$D/doc.a doc.$O
	$(AR) grc _obj$D/parser.a parser.$O
	rm -f $(O3)


newpkg: clean
	mkdir -p _obj$D
	$(AR) grc _obj$D/ast.a
	$(AR) grc _obj$D/doc.a
	$(AR) grc _obj$D/parser.a
	$(AR) grc _obj$D/scanner.a
	$(AR) grc _obj$D/token.a

$(O1): newpkg
$(O2): a1
$(O3): a2
$(O4): a3

nuke: clean
	rm -f $(GOROOT)/pkg$D/ast.a $(GOROOT)/pkg$D/doc.a $(GOROOT)/pkg$D/parser.a $(GOROOT)/pkg$D/scanner.a $(GOROOT)/pkg$D/token.a

packages: _obj$D/ast.a _obj$D/doc.a _obj$D/parser.a _obj$D/scanner.a _obj$D/token.a

install: packages
	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
	cp _obj$D/ast.a $(GOROOT)/pkg$D/ast.a
	cp _obj$D/doc.a $(GOROOT)/pkg$D/doc.a
	cp _obj$D/parser.a $(GOROOT)/pkg$D/parser.a
	cp _obj$D/scanner.a $(GOROOT)/pkg$D/scanner.a
	cp _obj$D/token.a $(GOROOT)/pkg$D/token.a
